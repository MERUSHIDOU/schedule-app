# Logging Requirements

## Overview

重要な会話や作業内容を構造化されたログとして記録し、プロジェクトの意思決定と作業履歴を追跡可能にする。

## When to Log

以下の会話は記録すること：

### 必須
- 新機能の実装
- バグ修正
- コードのリファクタリング
- 設計の決定や変更
- 重要なトラブルシューティング

### 推奨
- 複雑な問題の調査
- パフォーマンス最適化
- セキュリティ対応

### 記録不要
- 簡単な質問や確認
- タイポ修正のみの変更
- ドキュメントの軽微な更新

## How to Log

### 実行方法

```bash
/log-conversation
```

会話完了時に実行する。スキルが自動的に：
1. 会話内容を分析
2. 重要な情報を抽出
3. 構造化されたフォーマットで記録

### ログファイルの構造

```
.claude/logs/
├── 2026-01-24_conversation.md
├── 2026-01-25_conversation.md
└── ...
```

- 日付ごとに1ファイル（`YYYY-MM-DD_conversation.md`）
- 同日の複数セッションは同じファイルに追記
- **重要**: 既存ファイルは絶対に上書きしない

## What to Log

各セッションには以下を記録：

1. **タイムスタンプ**: 会話の開始時刻
2. **ユーザーのリクエスト**: 何を求められたか
3. **理解した意図**: どう解釈したか
4. **実施した操作**: 具体的な作業内容
   - 変更したファイル
   - 実行したコマンド
   - 追加/修正したコード
5. **判断の根拠**: なぜその方法を選択したか
6. **結果**: 成功/失敗、課題、次のステップ

## Log File Access Rules

### 書き込み
- `/log-conversation` スキル経由で記録
- 既存内容を上書きしない（追記のみ）
- 日本語で記録

### 読み込み
- **原則禁止**: 過去のログは参照しない
- **例外**: ユーザーが明示的に指示した場合のみ
- **理由**: コンテキスト節約とトークン効率化

## Technical Details

### File Format

```markdown
# 会話ログ - YYYY-MM-DD

---

## セッション1: <簡潔なタイトル>

### タイムスタンプ
YYYY-MM-DD HH:MM頃

### ユーザーのリクエスト
- リクエスト内容

### 理解した意図
解釈内容

### 実施した操作

#### 1. 操作名
**変更内容**:
- 具体的な変更

**ファイル**:
- ファイルパス

### 判断の根拠

#### なぜこのアプローチを選択したか
- 理由

### 結果

#### 成功した点
✅ 項目

#### 技術的な課題
- 課題

### 備考
- 補足事項

---
```

### Automation

- `/log-conversation` スキルが自動的に処理
- スキル内のinstructionsに従って記録
- ユーザーへの確認は不要

### File Management

- **Git管理対象外**: ログファイルは`.gitignore`に追加済み
- **ローカル保持**: ローカル環境でのみ保持
- **プライバシー保護**: プライバシー情報を含む可能性があるため公開しない

## Best Practices

1. **簡潔に記録**: 重要な情報のみ抽出
2. **構造化**: 決まったフォーマットを守る
3. **日本語**: すべて日本語で記録
4. **追記のみ**: 既存内容を削除・変更しない
5. **タイミング**: 会話完了時に実行

## Troubleshooting

### ログディレクトリが存在しない
→ 自動的に `.claude/logs/` を作成

### 既存ファイルの読み込み失敗
→ 新規ファイルとして作成

### 長い会話のログ
→ 主要な区切りで複数回実行可能

---

**Remember**: ログは将来の自分やチームメンバーのための記録。明確で追跡可能な形式で残すこと。
