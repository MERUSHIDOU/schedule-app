# Claude Code プロジェクト設定

このファイルはプロジェクト固有の情報と設定を定義します。

## ブランチ命名規則

- 機能追加: `feat/<機能名>`
- バグ修正: `fix/<修正内容>`
- ドキュメント: `docs/<内容>`
- リファクタリング: `refactor/<内容>`
- テスト追加: `test/<内容>`
- ビルド・設定: `chore/<内容>`

ベースブランチ: `master`

## Git ワークフロー

すべての変更は新しいブランチで作業し、Pull Requestで提出すること。

### 基本ルール
- 常に新しいブランチで作業
- 1ブランチ1修正の原則
- すべての変更はPR経由

### 詳細ルール
詳細なワークフローとベストプラクティスは `.claude/rules/workflow.md` を参照。

## プロジェクト概要

- PWA対応のスケジュール管理アプリ
- React + TypeScript + Vite
- GitHub Pagesでホスティング

## 対象環境（必須）

**Safari + iPhone環境で動作することを前提に設計すること。**

- Safari非対応のHTML/CSS/JS機能は使用しない
- 実装前にSafari/iOS Safariの互換性を確認する
- 例: `<input type="time" step="...">` はSafari非対応のため`<select>`を使用する
- iOS固有のUI/UX（セーフエリア、タッチ操作等）を考慮する

## 開発コマンド

```bash
npm run dev      # 開発サーバー起動
npm run build    # プロダクションビルド
npm run preview  # ビルド結果プレビュー
```

## テスト開発手法（必須）

**TDD（テスト駆動開発）を必須とする。すべての新機能実装・バグ修正はテストファーストで行うこと。**

### TDDの基本原則

1. **テストを先に書く** - 実装前に必ずテストを作成（RED）
2. **最小限の実装** - テストを通すための最小限のコードを書く（GREEN）
3. **リファクタリング** - テストを保ちながらコードを改善（REFACTOR）
4. **カバレッジ確認** - 80%以上のテストカバレッジを維持

### 利用可能なコマンド

```bash
/tdd [実装したい機能]  # TDDワークフローで新機能を実装
/e2e [テストしたいフロー]  # E2Eテストを生成・実行
```

### テストの種類

- **Unit Tests**: 個別の関数・コンポーネントのテスト（必須）
- **Integration Tests**: API・DB操作のテスト（必須）
- **E2E Tests**: 重要なユーザーフローのテスト（Playwright使用）

### カバレッジ要件

- **通常のコード**: 80%以上
- **重要なロジック**: 100%必須（認証、データ操作、計算処理等）

### 詳細ドキュメント

- TDDルール: `.claude/rules/testing.md`
- TDDエージェント: `.claude/agents/tdd-guide.md`
- E2Eエージェント: `.claude/agents/e2e-runner.md`
- ワークフロー詳細: `.claude/skills/tdd-workflow/SKILL.md`

## ログ記録（必須）

**重要な会話や作業完了時は、Claudeが自動的に `/log-conversation` スキルを実行すること。**

### Claudeの責任

- ✅ **プロアクティブに実行**: ユーザーの指示を待たずに自動実行
- ✅ **作業完了時に即座に実行**: 機能実装、バグ修正、設計決定などの完了直後
- ❌ **ユーザーからの要求を待たない**: 重要な作業は必ず記録

### 記録すべき会話（必須）
- 機能の実装や変更
- バグ修正
- 設計の決定
- トラブルシューティング

### 実行タイミング
```
1. 機能実装完了（PRマージ前後）
2. バグ修正完了
3. 設計決定後
4. 重要なトラブルシューティング後
   ↓
   Claudeが自動的に /log-conversation を実行
```

### ログの場所
- `.claude/logs/YYYY-MM-DD_conversation.md`（日付ごとに1ファイル）

### 注意事項
- 過去のログは明示的に指示されない限り参照しない（コンテキスト節約のため）
- ログファイルへの追記時は既存内容を上書きしない

### 詳細ルール
詳細な記録方法とルールは `.claude/rules/logging.md` を参照。
